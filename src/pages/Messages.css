.messages-page { height: calc(100vh - 120px); }
.messages-layout { display: flex; height: 100%; background: var(--bg-white); border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); border: 1px solid var(--border); overflow: hidden; }

/* Sidebar */
.messages-sidebar { width: 320px; border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; }
.messages-sidebar__header { display: flex; align-items: center; justify-content: space-between; padding: 16px 16px 12px; }
.messages-sidebar__header h3 { font-size: 16px; font-weight: 600; }
.messages-sidebar__search { display: flex; align-items: center; gap: 8px; margin: 0 12px 12px; padding: 6px 10px; background: var(--bg); border-radius: var(--radius); border: 1px solid var(--border); }
.messages-sidebar__search input { border: none; outline: none; background: transparent; font-size: 13px; flex: 1; }
.messages-sidebar__list { flex: 1; overflow-y: auto; }
.messages-empty-sidebar { padding: 32px 16px; text-align: center; color: var(--text-secondary); font-size: 13px; }
.messages-empty-sidebar p { margin-bottom: 12px; }

.conv-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; transition: background 0.1s; }
.conv-item:hover { background: var(--bg); }
.conv-item--active { background: var(--primary-light); }
.conv-item--unread .conv-item__name { font-weight: 700; }
.conv-item__info { flex: 1; min-width: 0; }
.conv-item__name { font-size: 14px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.conv-item__last { font-size: 12px; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 2px; }
.conv-item__badge { background: var(--primary); color: white; font-size: 11px; font-weight: 600; padding: 2px 7px; border-radius: 10px; min-width: 20px; text-align: center; }

.msg-avatar { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 13px; flex-shrink: 0; background: var(--text-light); }
.msg-avatar--group { background: var(--primary); }

/* Chat area */
.messages-chat { flex: 1; display: flex; flex-direction: column; min-width: 0; }
.messages-chat__empty { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: var(--text-secondary); }
.messages-chat__empty svg { opacity: 0.2; margin-bottom: 16px; }
.messages-chat__empty h3 { margin-bottom: 8px; }

.messages-chat__header { display: flex; align-items: center; gap: 12px; padding: 12px 20px; border-bottom: 1px solid var(--border); }
.messages-chat__header h4 { font-size: 15px; }
.messages-chat__participants { font-size: 12px; color: var(--text-secondary); }
.messages-back-btn { display: none; }

.messages-chat__body { flex: 1; overflow-y: auto; padding: 20px; }
.messages-date-divider { text-align: center; margin: 16px 0; }
.messages-date-divider span { background: var(--bg); padding: 4px 12px; border-radius: 12px; font-size: 11px; color: var(--text-light); }

.message { display: flex; gap: 8px; margin-bottom: 12px; max-width: 75%; }
.message--sent { margin-left: auto; flex-direction: row-reverse; }
.message--received { margin-right: auto; }
.message__avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 11px; font-weight: 600; flex-shrink: 0; margin-top: 4px; }
.message__content { display: flex; flex-direction: column; }
.message__sender { font-size: 12px; font-weight: 600; color: var(--text-secondary); margin-bottom: 2px; }
.message__bubble { padding: 10px 14px; border-radius: 16px; font-size: 14px; line-height: 1.4; word-break: break-word; }
.message--sent .message__bubble { background: var(--primary); color: white; border-bottom-right-radius: 4px; }
.message--received .message__bubble { background: var(--bg); color: var(--text); border-bottom-left-radius: 4px; }
.message__time { font-size: 11px; color: var(--text-light); margin-top: 4px; }
.message--sent .message__time { text-align: right; }

.messages-chat__input { display: flex; gap: 8px; padding: 12px 20px; border-top: 1px solid var(--border); align-items: flex-end; }
.messages-chat__input textarea { flex: 1; padding: 10px 14px; border: 1px solid var(--border); border-radius: 20px; font-size: 14px; resize: none; outline: none; max-height: 100px; font-family: inherit; }
.messages-chat__input textarea:focus { border-color: var(--primary); }
.btn-icon-round { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 0; flex-shrink: 0; }
.btn-icon-round:disabled { opacity: 0.4; cursor: not-allowed; }

/* New chat modal */
.new-chat-list { max-height: 300px; overflow-y: auto; margin-top: 12px; }
.new-chat-item { display: flex; align-items: center; gap: 12px; padding: 10px 12px; cursor: pointer; border-radius: var(--radius); transition: background 0.1s; }
.new-chat-item:hover { background: var(--bg); }
.new-chat-item__name { font-size: 14px; font-weight: 500; }
.new-chat-item__role { font-size: 12px; color: var(--text-secondary); }

@media (max-width: 768px) {
  .messages-sidebar { width: 100%; }
  .messages-sidebar--hidden-mobile { display: none; }
  .messages-chat--hidden-mobile { display: none; }
  .messages-back-btn { display: flex; }
  .message { max-width: 85%; }
}
